<html xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:MSHelp="http://msdn.microsoft.com/mshelp" xmlns:mshelp="http://msdn.microsoft.com/mshelp" xmlns:ddue="http://ddue.schemas.microsoft.com/authoring/2003/5" xmlns:msxsl="urn:schemas-microsoft-com:xslt"><head><META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=UTF-8" /><META NAME="save" CONTENT="history" /><title>Tracing Driver Operation</title><meta name="Language" content="en-us" /><meta name="System.Keywords" content="tracing" /><meta name="Microsoft.Help.Id" content="723aeae7-6504-4585-ba8b-3525115bea8b" /><meta name="Description" content="The Microsoft JDBC Driver for SQL Server supports the use of tracing (or logging) to help resolve issues and problems with the JDBC driver when it is used in your application. To enable the use of tracing, the JDBC driver uses the logging APIs in java." /><meta name="Microsoft.Help.ContentType" content="Concepts" /><link rel="stylesheet" type="text/css" href="../local/Classic.css" /><script type="text/javascript" src="../scripts/EventUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/SplitScreen.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/Dropdown.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_manifold.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/script_feedBack.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CheckboxMenu.js">&amp;nbsp;</script><script type="text/javascript" src="../scripts/CommonUtilities.js">&amp;nbsp;</script><script type="text/javascript" src="../local/script_main.js">&amp;nbsp;</script></head><body><div id="header"><table id="bottomTable" cellpadding="0" cellspacing="0"><tr><td align="left"><span id="headerBold">Tracing Driver Operation</span></td></tr></table><table id="gradientTable"><tr><td class="nsrBottom" background="../icons/gradient.gif" /></tr></table></div><div id="mainSection"><div id="mainBody"><div class="introduction"><p>The Microsoft JDBC Driver for SQL Server supports the use of tracing (or logging) to help resolve issues and problems with the JDBC driver when it is used in your application. To enable the use of tracing, the JDBC driver uses the logging APIs in java.util.logging, which provides a set of classes for creating <b>Logger</b> and <b>LogRecord</b> objects.</p><div style="margin: .5em 1.5em .5em 1.5em"><b></b><p>For the native component (sqljdbc_xa.dll) that is included with the JDBC driver, tracing is enabled by the Built-In Diagnostics (BID) framework. For information about BID, see <a href="http://go.microsoft.com/fwlink/?LinkId=70042">Data Access Tracing in SQL Server</a>.</p></div><p>When you develop your application, you can make calls to <b>Logger</b> objects, which in turn create <b>LogRecord</b> objects, which are then passed to <b>Handler</b> objects for processing. <b>Logger</b> and <b>Handler</b> objects both use logging levels, and optionally logging filters, to regulate which <b>LogRecords</b> are processed. When the logging operations are complete, the <b>Handler</b> objects can optionally use <b>Formatter</b> objects to publish the log information.</p><p>By default, the java.util.logging framework writes its output to a file. This output log file must have write permissions for the context under which the JDBC driver is running.</p><div style="margin: .5em 1.5em .5em 1.5em"><b></b><p>For more information about using the various logging objects for program tracing, see the Java Logging APIs documentation on the Sun Microsystems Web site.</p></div><p>The following sections describe the logging levels and the categories that can be logged, and provide information about how to enable tracing in your application.</p></div><h1 class="heading">Logging Levels</h1><div id="sectionSection0" class="section" name="collapseableSection" style=""><p>Every log message that is created has an associated logging level. The logging level determines the importance of the log message, which is defined by the <span class="label">Level</span> class in java.util.logging. Enabling logging at one level also enables logging at all higher levels. This section describes the logging levels for both public logging categories and internal logging categories. For more information about the logging categories, see the Logging Categories section in this topic.</p><p>The following table describes each of the available logging levels for public logging categories.</p><div class="tableSection"><table width="50%" cellspacing="2" cellpadding="5" frame="lhs"><tr><th><p>Name</p></th><th><p>Description</p></th></tr><tr><td><p>SEVERE</p></td><td><p>Indicates a serious failure and is the highest level of logging. In the JDBC driver, this level is used for reporting errors and exceptions.</p></td></tr><tr><td><p>WARNING</p></td><td><p>Indicates a potential problem.</p></td></tr><tr><td><p>INFO</p></td><td><p>Provides informational messages.</p></td></tr><tr><td><p>CONFIG</p></td><td><p>Provides configuration messages. Note that the JDBC driver does not currently provide any configuration messages.</p></td></tr><tr><td><p>FINE</p></td><td><p>Provides basic tracing information including all exceptions thrown by the public methods.</p></td></tr><tr><td><p>FINER</p></td><td><p>Provides detailed tracing information including all public method entry and exit points with the associated parameter data types, and all public properties for public classes. In addition, input parameters, output parameters, and method return values except CLOB, BLOB, NCLOB, Reader, &lt;stream&gt; return value types. </p></td></tr><tr><td><p>FINEST</p></td><td><p>Provides highly detailed tracing information. This is the lowest level of logging.</p></td></tr><tr><td><p>OFF</p></td><td><p>Turns off logging.</p></td></tr><tr><td><p>ALL</p></td><td><p>Enables logging of all messages.</p></td></tr></table></div><p>The following table describes each of the available logging levels for the internal logging categories.</p><div class="tableSection"><table width="50%" cellspacing="2" cellpadding="5" frame="lhs"><tr><th><p>Name</p></th><th><p>Description</p></th></tr><tr><td><p>SEVERE</p></td><td><p>Indicates a serious failure and is the highest level of logging. In the JDBC driver, this level is used for reporting errors and exceptions. </p></td></tr><tr><td><p>WARNING</p></td><td><p>Indicates a potential problem.</p></td></tr><tr><td><p>INFO</p></td><td><p>Provides informational messages.</p></td></tr><tr><td><p>FINE</p></td><td><p>Provides tracing information including basic object creation and destruction. In addition, all exceptions thrown by the public methods.</p></td></tr><tr><td><p>FINER</p></td><td><p>Provides detailed tracing information including all public method entry and exit points with the associated parameter data types, and all public properties for public classes. In addition, input parameters, output parameters, and method return values except CLOB, BLOB, NCLOB, Reader, &lt;stream&gt; return value types.</p><p>The following logging categories existed in version 1.2 of the JDBC driver and had the FINE logging level: <a href="937292a6-1525-423e-a2b2-a18fd34c2893.htm">SQLServerConnection</a>, <a href="ec24963c-8b51-4838-91e9-1fbfa2347451.htm">SQLServerStatement</a>, XA, and <a href="097434fd-2b74-411c-a5ed-eba04481dde5.htm">SQLServerDataSource</a>. Beginning in the version 2.0 release, these are upgraded to the FINER level.</p></td></tr><tr><td><p>FINEST</p></td><td><p>Provides highly detailed tracing information. This is the lowest level of logging.</p><p>The following logging categories existed in version 1.2 of the JDBC driver and had the FINEST logging level: TDS.DATA and TDS.TOKEN. Beginning in the version 2.0 release, they retain the FINEST logging level. </p></td></tr><tr><td><p>OFF</p></td><td><p>Turns off logging.</p></td></tr><tr><td><p>ALL</p></td><td><p>Enables logging of all messages.</p></td></tr></table></div></div><h1 class="heading">Logging Categories</h1><div id="sectionSection1" class="section" name="collapseableSection" style=""><p>When you create a <b>Logger</b> object, you must tell the object which named entity or category that you are interested in getting log information from. The JDBC driver supports the following public logging categories, which are all defined in the com.microsoft.sqlserver.jdbc driver package.</p><div class="tableSection"><table width="50%" cellspacing="2" cellpadding="5" frame="lhs"><tr><th><p>Name</p></th><th><p>Description</p></th></tr><tr><td><p>Connection</p></td><td><p>Logs messages in the <a href="937292a6-1525-423e-a2b2-a18fd34c2893.htm">SQLServerConnection</a> class. The applications can set the logging level as FINER.</p></td></tr><tr><td><p>Statement</p></td><td><p>Logs messages in the <a href="ec24963c-8b51-4838-91e9-1fbfa2347451.htm">SQLServerStatement</a> class. The applications can set the logging level as FINER.</p></td></tr><tr><td><p>DataSource</p></td><td><p>Logs messages in the <a href="097434fd-2b74-411c-a5ed-eba04481dde5.htm">SQLServerDataSource</a> class. The applications can set the logging level as FINE.</p></td></tr><tr><td><p>ResultSet</p></td><td><p>Logs messages in the <a href="eaffcff1-286c-459f-83da-3150778480c9.htm">SQLServerResultSet</a> class. The applications can set the logging level as FINER.</p></td></tr><tr><td><p>Driver</p></td><td><p>Logs messages in the <a href="fbdceae5-7e7b-4edb-8c33-c701ca6b2d53.htm">SQLServerDriver</a> class. The applications can set the logging level as FINER.</p></td></tr></table></div><p>Starting with the Microsoft JDBC Driver version 2.0, the driver also provides the com.microsoft.sqlserver.jdbc.internals package, which includes the logging support for the following internal logging categories.</p><div class="tableSection"><table width="50%" cellspacing="2" cellpadding="5" frame="lhs"><tr><th><p>Name</p></th><th><p>Description</p></th></tr><tr><td><p>AuthenticationJNI</p></td><td><p>Logs messages regarding the Windows integrated authentication issues (when the <span sdata="langKeyword" value="authenticationScheme"><span class="keyword">authenticationScheme</span></span> connection property is implicitly or explicitly set to <span sdata="langKeyword" value="NativeAuthentication"><span class="keyword">NativeAuthentication</span></span>).</p><p>The applications can set the logging level as FINEST and FINE.</p></td></tr><tr><td><p>SQLServerConnection</p></td><td><p>Logs messages in the <a href="937292a6-1525-423e-a2b2-a18fd34c2893.htm">SQLServerConnection</a> class. The applications can set the logging level as FINE and FINER.</p></td></tr><tr><td><p>SQLServerDataSource</p></td><td><p>Logs messages in the <a href="097434fd-2b74-411c-a5ed-eba04481dde5.htm">SQLServerDataSource</a>, <a href="b00e5a90-2af7-4d04-8ef8-256183777dcf.htm">SQLServerConnectionPoolDataSource</a>, and <a href="4c87e9d3-904a-4b86-90cc-3684034c86ee.htm">SQLServerPooledConnection</a> classes.</p><p>The applications can set the logging level as FINER.</p></td></tr><tr><td><p>InputStream</p></td><td><p>Logs messages regarding the following data types: java.io.InputStream, java.io.Reader and the data types, which have a max specifier such as varchar, nvarchar, and varbinary data types.</p><p>The applications can set the logging level as FINER.</p></td></tr><tr><td><p>SQLServerException</p></td><td><p>Logs messages in the <a href="af5ef257-7cf6-4db3-b1ee-07d22d82bef1.htm">SQLServerException</a> class. The applications can set the logging level as FINE.</p></td></tr><tr><td><p>SQLServerResultSet</p></td><td><p>Logs messages in the <a href="eaffcff1-286c-459f-83da-3150778480c9.htm">SQLServerResultSet</a> class. The applications can set the logging level as FINE, FINER, and FINEST.</p></td></tr><tr><td><p>SQLServerStatement</p></td><td><p>Logs messages in the <a href="ec24963c-8b51-4838-91e9-1fbfa2347451.htm">SQLServerStatement</a> class. The applications can set the logging level as FINE, FINER, and FINEST.</p></td></tr><tr><td><p>XA</p></td><td><p>Logs messages for all XA transactions in the <a href="95fc7b07-2498-4a7e-8f7f-ee0d86b598b4.htm">SQLServerXADataSource</a> class. The applications can set the logging level as FINE and FINER.</p></td></tr><tr><td><p>KerbAuthentication</p></td><td><p>Logs messages regarding type 4 Kerberos authentication (when the <span sdata="langKeyword" value="authenticationScheme"><span class="keyword">authenticationScheme</span></span> connection property is set to <span sdata="langKeyword" value="JavaKerberos"><span class="keyword">JavaKerberos</span></span>). The application can set the logging level as FINE or FINER.</p></td></tr><tr><td><p>TDS.DATA</p></td><td><p>Logs messages containing the TDS protocol-level conversation between the driver and SQL Server. The detailed contents of each TDS packet sent and received are logged in ASCII and hexadecimal. The login credentials (user names and passwords) are not logged. All other data is logged.</p><p>This category creates very verbose and detailed messages, and can only be enabled by setting the logging level to FINEST.</p></td></tr><tr><td><p>TDS.Channel</p></td><td><p>This category traces actions of the TCP communications channel with SQL Server. The logged messages include socket opening and closing as well as reads and writes. It also traces messages related to establishing a Secure Sockets Layer (SSL) connection with SQL Server.</p><p>This category can only be enabled by setting the logging level to FINE, FINER, or FINEST.</p></td></tr><tr><td><p>TDS.Writer</p></td><td><p>This category traces writes to the TDS channel. Note that only the length of the writes are traced, not the contents. This category also traces issues when an attention signal is sent to the server to cancel a statement's execution.</p><p>This category can only be enabled by setting the logging level to FINEST.</p></td></tr><tr><td><p>TDS.Reader</p></td><td><p>This category traces certain read operations from the TDS channel at the FINEST level. At the FINEST level, tracing can be quite verbose. At WARNING and SEVERE levels, this category traces when the driver receives an invalid TDS protocol from SQL Server before the driver closes the connection.</p><p>This category can only be enabled by setting the logging level to FINER and FINEST.</p></td></tr><tr><td><p>TDS.Command</p></td><td><p>This category traces low-level state transitions and other information associated with executing TDS commands, such as Transact-SQL statement executions, ResultSet cursor fetches, commits, and so on.</p><p>This category can only be enabled by setting the logging level to FINEST.</p></td></tr><tr><td><p>TDS.TOKEN</p></td><td><p>This category logs only the tokens within the TDS packets, and is less verbose than the TDS.DATA category. It can only be enabled by setting the logging level to FINEST.</p><p>At the FINEST level, this category traces TDS tokens as they are processed in the response. At the SEVERE level, this category traces when an invalid TDS token is encountered.</p></td></tr><tr><td><p>SQLServerDatabaseMetaData</p></td><td><p>Logs messages in the <a href="8b8049d0-8c6d-4476-866b-098709f37eec.htm">SQLServerDatabaseMetaData</a> class. The applications can set the logging level as FINE.</p></td></tr><tr><td><p>SQLServerResultSetMetaData</p></td><td><p>Logs messages in the <a href="9a36885f-83f3-44af-85f0-2b849dfd20d4.htm">SQLServerResultSetMetaData</a> class. The applications can set the logging level as FINE.</p></td></tr><tr><td><p>SQLServerParameterMetaData</p></td><td><p>Logs messages in the <a href="546290e0-9411-4a2b-aa36-61251e70e9cf.htm">SQLServerParameterMetaData</a> class. The applications can set the logging level as FINE.</p></td></tr><tr><td><p>SQLServerBlob</p></td><td><p>Logs messages in the <a href="88bd8623-889d-4b5d-99ff-c85b32f3ff5c.htm">SQLServerBlob</a> class. The applications can set the logging level as FINE.</p></td></tr><tr><td><p>SQLServerClob</p></td><td><p>Logs messages in the <a href="24170524-e1ab-4e80-8fd1-6688efacfbde.htm">SQLServerClob</a> class. The applications can set the logging level as FINE.</p></td></tr><tr><td><p>SQLServerSQLXML</p></td><td><p>Logs messages in the internal <b>SQLServerSQLXML</b> class. The applications can set the logging level as FINE.</p></td></tr><tr><td><p>SQLServerDriver</p></td><td><p>Logs messages in the <a href="fbdceae5-7e7b-4edb-8c33-c701ca6b2d53.htm">SQLServerDriver</a> class. The applications can set the logging level as FINE.</p></td></tr><tr><td><p>SQLServerNClob</p></td><td><p>Logs messages in the <a href="3d3883a2-c39c-439f-bbc0-01e73968672b.htm">SQLServerNClob</a> class. The applications can set the logging level as FINE.</p></td></tr></table></div></div><h1 class="heading">Enabling Tracing Programmatically</h1><div id="sectionSection2" class="section" name="collapseableSection" style=""><p>Tracing can be enabled programmatically by creating a <b>Logger</b> object and indicating the category to be logged. For example, the following code shows how to enable logging for SQL statements:</p><div class="sampleCode"><span codeLanguage="other"><pre>Logger logger = Logger.getLogger("com.microsoft.sqlserver.jdbc.Statement");
logger.setLevel(Level.FINER);</pre></span></div><p>To turn off logging in your code, use the following:</p><div class="sampleCode"><span codeLanguage="other"><pre>logger.setLevel(Level.OFF);</pre></span></div><p>To log all available categories, use the following:</p><div class="sampleCode"><span codeLanguage="other"><pre>Logger logger = Logger.getLogger("com.microsoft.sqlserver.jdbc");
logger.setLevel(Level.FINE);</pre></span></div><p>To disable a specific category from being logged, use the following:</p><div class="sampleCode"><span codeLanguage="other"><pre>Logger logger = Logger.getLogger("com.microsoft.sqlserver.jdbc.Statement");
logger.setLevel(Level.OFF);</pre></span></div></div><h1 class="heading">Enabling Tracing by Using the Logging.Properties File</h1><div id="sectionSection3" class="section" name="collapseableSection" style=""><p>You can also enable tracing by using the<span class="code"> logging.properties </span>file, which can be found in the<span class="code"> lib </span>directory of your Java Runtime Environment (JRE) installation. This file can be used to set the default values for the loggers and handlers that will be used when tracing is enabled.</p><p>The following is an example of the settings that you can make in the <span class="code">logging.properties</span> files:</p><div class="sampleCode"><span codeLanguage="other"><pre># Specify the handler, the handlers will be installed during VM startup.
handlers= java.util.logging.FileHandler
 
# Default global logging level.
.level= OFF

# default file output is in user's home directory.
java.util.logging.FileHandler.pattern = %h/java%u.log
java.util.logging.FileHandler.limit = 5000000
java.util.logging.FileHandler.count = 20
java.util.logging.FileHandler.formatter = java.util.logging.SimpleFormatter
java.util.logging.FileHandler.level = FINEST

# Facility specific properties.
com.microsoft.sqlserver.jdbc.level=FINEST
</pre></span></div><div style="margin: .5em 1.5em .5em 1.5em"><b></b><p>You can set the properties in the<span class="code"> logging.properties </span>file by using the <b>LogManager</b> object that is part of java.util.logging.</p></div></div><span id="seeAlsoSpan"><h1 class="heading">See Also</h1></span><div id="seeAlsoSection" class="section" name="collapseableSection" style=""><div class="seeAlsoStyle"><span sdata="link"><a href="723e2680-a0c5-4a7d-a319-1e49e41078cf.htm">Diagnosing Problems with the JDBC Driver</a></span></div></div></div><div id="footer" class="section"><span id="feedbackarea">Send <a href="javascript:SubmitFeedback('DevDocs@Microsoft.com','','','','01.00.12024.10000','%0\dThank%20you%20for%20your%20feedback.%20The%20developer%20writing%20teams%20use%20your%20feedback%20to%20improve%20documentation.%20While%20we%20are%20reviewing%20your%20feedback,%20we%20may%20send%20you%20e-mail%20to%20ask%20for%20clarification%20or%20feedback%20on%20a%20solution.%20We%20do%20not%20use%20your%20e-mail%20address%20for%20any%20other%20purpose%20and%20we%20delete%20it%20after%20we%20finish%20our%20review.%0\AFor%20further%20information%20about%20the%20privacy%20policies%20of%20Microsoft,%20please%20see%20http://privacy.microsoft.com/en-us/default.aspx.%0\A%0\d','Customer%20Feedback');">feedback</a> on this topic to Microsoft.</span><span id="copyrightarea"><p><a href="9bad553b-9e70-4696-8499-2e35f772a1e0.htm">© 2012 Microsoft.  All rights reserved.</a></p></span></div></div></body></html>